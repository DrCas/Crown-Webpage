Crown Graphics — MASTER PROJECT CONTEXT

(Authoritative / Replaces all prior chats)

1. Project Overview

Crown Graphics website is currently a static HTML / CSS / JS site.

The site is a visual and UX prototype of the production CrownGFX site.

Backend functionality (orders, email, admin, payments) is intentionally separated and introduced incrementally.

Raspberry Pi is used for development/testing, but production hosting will be web-based.

GitHub (public) is the single source of truth for code.

2. Tech Stack (Current & Planned)
Frontend (Live Today)

HTML5

CSS3 (single unified styles.css)

Vanilla JavaScript

Google Fonts (Poppins)

Google Maps embed

Backend (Designed / Partially Built)

Python Flask

SQLite (Pi-friendly, intentional)

Cloudflare Tunnel (admin access)

Dummy email system → real provider later

Stripe planned for payments

3. Global Design & UX Rules (Locked)
Branding

Color palette: Black / White / Gold accent

Font: Poppins (global)

Images: WebP preferred for all photography

Logos/UI assets may remain PNG/SVG

Header & Navigation

Sticky black header on all pages

Logo is image-based (not text)

Consistent navigation across all pages

Mobile nav is stacked (no hamburger yet)

Background Handling

Same background image applied to both html and body

Mobile uses background-attachment: scroll

Prevents white flashes and black gaps

4. Glass / Panel System (Very Important – Finalized)
Single Source of Truth

.glass is the only class that defines:

background color

shadow

blur / surface effect

No other class may redefine these properties.

Glass Style (Final)

Light neutral grey surface

Subtle blur (or none if unsupported)

Rounded corners

Soft elevation shadow

No heavy blur, no glow, no dark tint

Usage Rules

Apply .glass directly to the visual panel

Never nest glass inside glass

Layout/helper classes must NOT style panels

✅ Correct:

<section class="container readable glass">


❌ Incorrect:

.readable.glass { background: ... }

5. Pages & Features (Consolidated)
Home (index.html)

Hero section with:

Background image

Logo

Headline

CTA → Contact

Services grid:

Vehicle Wraps

Signs & Banners

Custom Decals

Each service requires a matching image asset

About (about.html)

Single centered glass panel

Large readable typography

Banner header with gradient overlay

No additional decorative panels

Contact (contact.html)

Desktop: two-column layout

Mobile: stacked

Independent glass panels:

Intro text

Contact form

Map + business info

Google Maps embed:

13766 Redwood St, Chino, CA 91710

Contact form:

mailto: only (temporary, unreliable)

Portfolio (portfolio.html)

Final architecture (conflicts resolved):

Top: Autoplay-only slideshow (non-interactive)

Bottom: Thumbnail gallery

Glass applies ONLY to slideshow

Gallery has NO glass (performance decision)

Slideshow

Autoplay

Fade transitions

Image counter

No clicking / navigation

Uses sequential filenames:

images/Collection/Slides/slide-1.webp
slide-2.webp
...

Gallery

Responsive CSS grid

Lazy loading + IntersectionObserver

Clicking thumbnail opens lightbox

Lightbox

Full-screen modal

ESC / backdrop / close button supported

⚠️ Gallery-grid-only or full-gallery-only designs were explicitly abandoned due to performance issues.

Quick Order (quick-order.html)
Order Flows

Quick Print (print-ready)

Large Projects / Wraps (proof-required)

Pricing Rules (Locked)

Minimum charge: $50

Sqft always rounded up

Rotation allowed for material efficiency

Printed Items

$23 / sqft

54" roll

Extra 12" ONLY if print-and-cut

Die-Cut (1 color)

$18 / sqft

30" roll

No extra material

Large Projects

Fixed $250 non-refundable deposit

Configurable later

Front-end only for now

6. Image Strategy (Final)

All photographic images converted to WebP

Originals preserved separately for print

CSS + inline background paths updated to .webp

Portfolio JS supports WebP natively

Thumbnails recommended for performance

7. Admin Portal (Internal System)
Architecture

Flask + SQLite (crown_portal.db)

Shared backend with customer orders

Hosted internally via Cloudflare Tunnel

User Roles

Admin

Staff

Admins:

Manage users

Reset passwords

View audit logs

Safety rules:

Admin cannot delete themselves

Cannot delete last admin

Job System

Fields

Customer name

Business name

Phone

Email

Job title

Summary

Notes

Quote

Date Received (manual)

Date Created (auto)

PO Format

MMDDYY-##

Based on Date Received

Resets daily

Safe overflow beyond 99

Progress Stages

Received

Design

Proof

Production

Install / Pickup

Completed

Visual segmented progress bar

Completed jobs auto-archive

Audit Logs (Admin Only)

Timestamp

User

Action

Field diffs

Stage changes

8. Customer Orders → Admin Portal (Confirmed Flow)

Customer order submission:

Creates admin job automatically

Sends email notification

New jobs flagged with NEW / !

Shared database between customer + admin systems

Dummy Mode (Required First)

Emails printed to console

Emails stored in email_outbox table

No real payments or SMTP

9. Constraints (Hard Limits)

Static HTML alone cannot:

send reliable emails

store orders

handle uploads

SQLite has no auto migrations

Gallery blur must remain limited

Mailto forms are temporary only

10. Unresolved / Next Decisions

Hosting strategy:

static + /order backend

OR full Flask migration

Payment provider finalization (Stripe planned)

Email provider selection

File upload storage strategy

Admin UI:

New-order indicator

Mark reviewed

Optional future:

Customer login

Proof approval portal

Reporting / exports

11. Current State

Website design is client-ready

Mobile & desktop stable

Admin portal architecture locked

Order → admin → email flow approved

Ready for incremental implementation

12. Order Intake System Upgrade (Feb 2026 – Implemented)

Website Side (Crown Static Site)

Structured Order Forms Added

Quick Print Order:
- Customer information fields
- Requested item type
- Needed‑by date
- Order summary
- Requested items table (qty / description / material / notes)
- File uploads
- Terms acceptance checkbox

Large Project / Wrap Intake:
- Customer information
- Project type and service needed
- Design status
- Install location
- Vehicle details
- Scope / measurements
- Optional item table
- File uploads
- Terms acceptance checkbox

These forms are structured for real production intake rather than simple contact-form emails.


Terms Page

A dedicated terms.html page now exists containing:
- Estimate disclaimers
- Pricing subject‑to‑change language
- Deposit policy
- Warranty terms:
  - 1 year on horizontal surfaces
  - 2 years on vertical surfaces
- Installation conditions
- Artwork approval terms
- Privacy statement

Order forms link directly to this page.


Backend Order Intake System (Admin Portal)

New modules added inside Admin-Portal:
- orders_api.py
- pdf_utils.py
- email_utils.py

New Endpoint:
POST /api/orders

Accepts:
- FormData (including file uploads)
- order_type (quick or large)
- items_json (table rows)
- All customer and project fields


API Behavior (End-to-End Design)

When fully wired, the system will:
1. Create a new database entry in the Admin Portal
2. Store submission JSON
3. Store uploaded file paths
4. Generate a PDF using ReportLab
5. Send:
   - Internal notification email
   - Customer confirmation email
   - PDF attached to emails

Email delivery is SMTP‑configurable (temporary Gmail or future business mail).


nginx Routing Layer

Routing rule added:

location /api/ {
    proxy_pass http://127.0.0.1:5000;
}

Resulting request flow:

Static site (dev.drcastiel.com)
→ /api/orders
→ nginx
→ gunicorn (Flask)
→ SQLite database
→ PDF generation
→ Email system

This avoids CORS issues and keeps a clean architecture.


Service Architecture (Current Design)

Customer
  ↓
Static Site (nginx)
  ↓
/api/orders
  ↓
nginx proxy
  ↓
gunicorn (crown-admin.service)
  ↓
Flask application
  ↓
SQLite (crown_portal.db)
  ↓
PDF generation
  ↓
Email system (SMTP-ready)


Current Incomplete Items

The following items are intentionally pending:

- Blueprint registration in app.py
- Database column additions if required for JSON storage
- SMTP credentials configuration
- Frontend fetch() submission wiring
- Production email testing


Current Status

- Backend service running
- nginx routing configured
- Repository up to date
- API files present on Raspberry Pi
- Infrastructure in place for full intake workflow

The system has evolved from a static marketing site into a structured production intake pipeline that feeds the Admin Portal.
